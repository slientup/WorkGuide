# 缓存
#### 产品最终目标
以更快的速度为用户提供准确的优质的服务
#### 缓存解决什么问题
为用户提供`更快`的服务 
#### 如何判断缓存质量
缓存命中率，命中率越高，缓存的作用越大
#### 淘汰策略
缓存通常位于内存中，空间极其有限，所有我们需要保证留在里面的都是热点数据；
- `最不经常使用策略`：优先淘汰一段时间内使用次数最少的数据，根据使用频率来做决策  一个从`频率`的维度
- `最近最久未使用策略`：优先淘汰最久未使用的策略，即上次被访问距离现在最久的数据，一个从`时间`的维度

### 缓存位置
当用户在浏览器发起一个请求，到用户收到对应的返回，这个过程是非常快，但实际上涉及的环节非常多，这条链路很长，在这条链路中的各个环境都可以做
缓存优化；
#### 浏览器
浏览器会缓存服务器返回的静态资源
#### CDN
CDN是离用户最近的一个环节，往往我们会把静态资源发布到CDN厂商
#### 反向代理
用户的请求和返回都经过反向代理，将数据直接缓存在反向代理服务器里
#### 本地缓存
将数据缓存到自己本地内存中，磁盘中，是局部数据
#### 分布式缓存
利用redis memcache等缓存数据库做分布式缓存
#### 数据库缓存
mysql拥有自己的查询缓存机制来提高查询效率
#### cpu多级缓存
cpu为了解决运算速度和主存IO速度不匹配的问题，引入了多级缓存，cpu在处理内存里面的数据的时候，需要将内存中数据拉入到cpu的寄存器缓存中

### 缓存问题
#### 缓存穿透
对某个不存在的数据进行请求，该请求将会穿透缓存到达数据库
解决方案：布隆过滤器 布隆过滤器判断某个值是否存在
#### 缓存雪崩
雪崩是指由于缓存失效，突然之间大量的请求进入数据库，导致数据库相应慢；
解决方案：
- 为了防止缓存在同一时间大面积过期导致的缓存雪崩，设置缓存失效时间的时候+一个随机值
- 使用分布式缓存，防止单台设备故障导致雪崩

#### 缓存一致性











